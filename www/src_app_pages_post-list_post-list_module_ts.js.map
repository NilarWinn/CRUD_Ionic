{"version":3,"file":"src_app_pages_post-list_post-list_module_ts.js","mappings":"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","sources":["./src/app/pages/post-list/post-list-routing.module.ts","./src/app/pages/post-list/post-list.module.ts","./src/app/pages/post-list/post-list.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PostListPage } from './post-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PostListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PostListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PostListPageRoutingModule } from './post-list-routing.module';\n\nimport { PostListPage } from './post-list.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PostListPageRoutingModule\n  ],\n  declarations: [PostListPage]\n})\nexport class PostListPageModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { IonFab, IonInfiniteScroll, NavController, Platform, PopoverController } from '@ionic/angular';\nimport { Papa } from 'ngx-papaparse';\nimport { Post } from 'src/app/models/post';\nimport { ApiService } from 'src/app/services/api.service';\nimport { SettingPage } from '../setting/setting.page';\nimport { File } from '@ionic-native/file/ngx';\nimport { SocialSharing } from '@ionic-native/social-sharing/ngx';\n\n@Component({\n  selector: 'app-post-list',\n  templateUrl: './post-list.page.html',\n  styleUrls: ['./post-list.page.scss'],\n})\nexport class PostListPage implements OnInit {\n  @ViewChild('fabComponent') fabComponent: IonFab;\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n  popover: any;\n  searchData : any;\n  postList = [];\n  isSearch = false;\n  isOpen = false;\n  csvData: any[] = [];\n  headerRow: any[] = [\"Id\",\"Title\",\"Description\",\"Created User Id\", \"Created At\"];\n  unsubscribeBackEvent: any;\n  start = 1\n  end = 0\n   \n  constructor(\n    private router: Router,\n    private platform: Platform,\n    private activatedRoute: ActivatedRoute,\n    private popoverController : PopoverController,\n    private nav: NavController,\n    private api : ApiService,\n    private papa: Papa,\n    private file: File,\n    private socialSharing: SocialSharing) { }\n\n  ngOnInit() {  }\n\n  ionViewWillEnter() {\n    this.isSearch = false;\n    this.getPostList(this.start)\n  }\n\n  ionViewDidEnter() {\n    this.initializeBackButtonCustomHandler();\n  }\n\n  getPostList(start) {\n    this.api.getPostList(start).subscribe(data => {\n      var responseData : any = data;\n      console.log(responseData)\n      if (responseData.success == true) {\n        var dataList:any = responseData.data.docs;\n        this.end = responseData.data.nextPage;\n        console.log(dataList)\n        console.log(dataList.length)\n        dataList.forEach((item, index) => {\n          this.postList.push(item)\n        })\n      }\n    })\n  }\n  \n  // to show pop over for edit and delete function\n  async presentPopover(ev: any, postId: any, post : Post) {\n    console.log(postId)\n    this.popover = await this.popoverController.create({\n      component: SettingPage,\n      event: ev,\n      cssClass: 'popover_setting',\n      componentProps: {\n        id: postId\n      },\n      translucent: true,\n      mode: \"md\",\n    });\n    this.popover.onDidDismiss().then((result) => {\n      var response:any = result.data\n      console.log(\"selected post id : \", response.id);\n      if (response.type == \"edit\") {\n        console.log(\"selected edit\");\n        let params: any = {\n          isEdit : true,\n          postData : post\n        }\n        this.nav.navigateForward('main/tabs/add-new-product', { state: params });\n      }else{\n        console.log(\"selected delete\");\n      }\n    });\n    return await this.popover.present();\n  }\n\n  // For search textfield\n  ionChange(event){\n    console.log( event.detail.value)\n  }\n\n  onCancel(){\n    console.log(\"onCancel\" + this.searchData)\n  }\n\n  close(){\n    console.log(\"close\" + this.searchData)\n  }\n\n  onClear(event) {\n    this.isSearch = false\n    console.log(\"onClear\" )\n  }\n\n  // For load more data\n  loadData(event) {\n    setTimeout(() => {\n      console.log('Done');\n      event.target.complete();\n      this.start += 1;\n      this.getPostList(this.start)\n      if (this.start >= this.end) {\n        event.target.disabled = true;\n      }\n    }, 500);\n  }\n\n  toggleInfiniteScroll() {\n    this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\n  }\n\n  // floating action button\n  exportCSV() {\n    this.isOpen = false\n    console.log(\"download\")\n    var strArray  = [];\n    if (this.postList.length > 0){\n      for (var i = 0; i < this.postList.length; i++) {\n        var postdata = this.postList[i]\n        var row = []\n        for (var key in postdata) {\n          row.push(postdata[key].toString())\n        }\n        strArray.push(row)\n      }\n    }\n    console.log(strArray)\n\n    if(strArray.length > 0) {\n      let csv = this.papa.unparse({\n        fields: this.headerRow,\n        data: strArray\n      });\n     \n      this.file.writeFile(this.file.dataDirectory, 'data.csv', csv, {replace: true}).then( res => {\n        this.socialSharing.share(null, null, res.nativeURL, null).then(e =>{\n          // Success\n          console.log(\"Share success\", e)\n        }).catch(e =>{\n          console.log('Share failed:', e)\n        });\n      }, err => {\n        console.log('Error: ', err);\n      });\n    }\n  }\n\n  upload() {\n   this.isOpen = false\n    console.log(\"upload\")\n    this.nav.navigateForward('main/tabs/upload-csv');\n  }\n\n  search() {\n    console.log(\"search\")\n    this.isOpen = false\n    this.isSearch = true\n    this.searchData = \"\"\n  }\n\n  floatingBtn() {\n    console.log(\"floatingBtn\")\n    this.isOpen = true\n  }\n\n  touchstart(event){\n    console.log(\"touchstart\" ,this.isOpen)\n    this.fabComponent.close();\n  }\n\n  initializeBackButtonCustomHandler(): void {\n    this.unsubscribeBackEvent = this.platform.backButton.subscribeWithPriority(10, () => {\n      if (this.router.url === '/main/tabs/post-list') {\n        if (window.confirm('Do you want to exit the app?')) {\n          navigator['app'].exitApp();\n        }\n      }\n      else {\n        console.log('login'+this.router.url);\n      }\n    });\n  }\n\n  ionViewWillLeave() {\n    this.unsubscribeBackEvent.unsubscribe();\n  }\n}\n"],"names":["Component","ViewChild","ActivatedRoute","Router","IonInfiniteScroll","NavController","Platform","PopoverController","Papa","ApiService","SettingPage","File","SocialSharing","PostListPage","constructor","router","platform","activatedRoute","popoverController","nav","api","papa","file","socialSharing","ngOnInit","ionViewWillEnter","isSearch","getPostList","start","ionViewDidEnter","initializeBackButtonCustomHandler","subscribe","data","responseData","console","log","success","dataList","docs","end","nextPage","length","forEach","item","index","postList","push","presentPopover","ev","postId","post","popover","create","component","event","cssClass","componentProps","id","translucent","mode","onDidDismiss","then","result","response","type","params","isEdit","postData","navigateForward","state","present","ionChange","detail","value","onCancel","searchData","close","onClear","loadData","setTimeout","target","complete","disabled","toggleInfiniteScroll","infiniteScroll","exportCSV","isOpen","strArray","i","postdata","row","key","toString","csv","unparse","fields","headerRow","writeFile","dataDirectory","replace","res","share","nativeURL","e","catch","err","upload","search","floatingBtn","touchstart","fabComponent","unsubscribeBackEvent","backButton","subscribeWithPriority","url","window","confirm","navigator","exitApp","ionViewWillLeave","unsubscribe","args","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}